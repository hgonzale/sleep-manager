[tox]
requires =
    tox>=4.14.0
    tox-uv>=1.11.0
env_list =
    test
    lint
    typecheck

[testenv:test]
description = Run the test suite with the default interpreter
runner = uv-venv-runner
dependency_groups = dev
commands =
    pytest -v {posargs:tests}

[testenv:lint]
description = Run Ruff lint checks
runner = uv-venv-runner
dependency_groups = dev
commands =
    ruff check {posargs:.}

[testenv:typecheck]
description = Run ty type checks
runner = uv-venv-runner
dependency_groups = dev
commands =
    ty check {posargs:sleep_manager tests}

[testenv:docs]
description = Build the Sphinx documentation
runner = uv-venv-runner
dependency_groups = docs
commands =
    python -m sphinx -b html docs docs/_build/html
