[tox]
requires =
    tox>=4.14.0
    tox-uv>=1.11.0
env_list =
    py{38,39,310,311}
    lint
    typecheck

[testenv]
description = Run the unit test suite
runner = uv-venv
dependency_groups = dev
commands =
    pytest {posargs:tests}

[testenv:lint]
description = Run Ruff lint checks
runner = uv-venv
dependency_groups = dev
commands =
    ruff check {posargs:.}

[testenv:typecheck]
description = Run mypy type checks
runner = uv-venv
dependency_groups = dev
commands =
    mypy {posargs:sleep_manager tests}

[testenv:fmt]
description = Run Ruff formatting (non-checking)
runner = uv-venv
dependency_groups = dev
skip_install = true
commands =
    ruff format {posargs:.}
